<mat-accordion>
    <mat-expansion-panel>
        <mat-expansion-panel-header>
        <mat-panel-title>
            Personal data
        </mat-panel-title>
        <mat-panel-description>
            You can change it if you want
        </mat-panel-description>
        </mat-expansion-panel-header>

        <ng-template matExpansionPanelContent>

            <section fxFlex fxLayout="column wrap" fxLayoutAlign="center start" fxLayoutGap="20px">

                <form
                    (ngSubmit)="onEmailChangeSubmit(emailChangeForm.value)"
                    [formGroup]="emailChangeForm">

                    <p> Current email is <strong>{{ currentUserEmail }}</strong> </p>

                    <mat-form-field>
                        <input 
                            matInput 
                            placeholder="Email"
                            [ngStyle]="{ color: emailChangeForm.controls.email.errors && emailChangeForm.controls.email.dirty ? 'red' : 'green' }"
                            formControlName="email">
                        <mat-error***REMOVED***ngIf="emailChangeForm.controls.email.hasError('pattern')">
                            Please enter a valid email address
                        </mat-error>
                    </mat-form-field>

                    
                    <button mat-raised-button size="large" type="submit" [disabled]="emailChangeForm.invalid" expand="block">Submit changing</button>

                </form>

                <mat-form-field appearance="outline">
                    <mat-label>Current password</mat-label>
                    <input
                        (focusout)="checkIfItIsCurrentPassword($event.target.value)"
                        matInput
                        type="password"
                        placeholder="Your current password"
                        [ngStyle]="{ color: isCurrentPasswordRight ? 'green' : 'red' }" />
                    <mat-hint>
                        trust but check
                    </mat-hint>
                </mat-form-field>

                <form
                    (ngSubmit)="onPasswordChangeSubmit(passwordChangeForm.value)"
                    [formGroup]="passwordChangeForm"
                   ***REMOVED***ngIf="isCurrentPasswordRight"
                    fxFlex fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="20px">

                    <mat-form-field>
                        <input
                            matInput 
                            placeholder="New password"
                            type="password"
                            [ngStyle]="{ color: passwordControls.password.errors && passwordControls.password.dirty ? 'red' : 'green' }"
                            (input)="onPasswordInput()"
                            formControlName="password">
                    </mat-form-field>

                    <mat-form-field>
                        <input
                            matInput 
                            placeholder="Confirm new password"
                            type="password"
                            [ngStyle]="{ color: passwordControls.confirmPassword.errors && passwordControls.confirmPassword.dirty ? 'red' : 'green' }"
                            (input)="onPasswordInput()"
                            formControlName="confirmPassword">
                        <mat-error***REMOVED***ngIf="passwordControls.confirmPassword.errors && passwordControls.confirmPassword.dirty">
                            Passwords <strong>mismatch</strong>
                        </mat-error> 
                    </mat-form-field>

                    <button mat-raised-button size="large" type="submit" [disabled]="passwordChangeForm.invalid" expand="block">Change password</button>

                </form>

            </section>
        </ng-template>

    </mat-expansion-panel>
    <mat-expansion-panel>
        <mat-expansion-panel-header>
        <mat-panel-title>
            Self aware panel
        </mat-panel-title>
        <mat-panel-description>
            Currently I am empty inside
        </mat-panel-description>
        </mat-expansion-panel-header>
    </mat-expansion-panel>
</mat-accordion>
